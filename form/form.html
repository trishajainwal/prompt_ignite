<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Feedback System</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
      min-height: 100vh;
      line-height: 1.6;
    }

    /* Cover Page Styles */
    .cover-container {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }

    .cover-content {
      text-align: center;
      max-width: 480px;
      width: 100%;
    }

    .cover-header {
      margin-bottom: 48px;
      color: #1565c0;
    }

    .cover-header h1 {
      font-size: 42px;
      font-weight: 700;
      margin-bottom: 16px;
      text-shadow: 0 2px 8px rgba(21, 101, 192, 0.3);
      background: linear-gradient(135deg, #1565c0, #42a5f5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .cover-header p {
      font-size: 18px;
      color: #1976d2;
      line-height: 1.6;
      font-weight: 400;
    }

    .options-container {
      display: grid;
      gap: 24px;
      margin-bottom: 32px;
    }

    .option-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 36px 28px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(21, 101, 192, 0.15);
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 2px solid rgba(255, 255, 255, 0.3);
      position: relative;
      overflow: hidden;
    }

    .option-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s;
    }

    .option-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(21, 101, 192, 0.25);
      border-color: #42a5f5;
    }

    .option-card:hover::before {
      left: 100%;
    }

    .option-card .icon {
      font-size: 52px;
      margin-bottom: 20px;
      display: block;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
    }

    .feedback-option .icon {
      background: linear-gradient(135deg, #42a5f5, #1976d2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .dashboard-option .icon {
      background: linear-gradient(135deg, #26c6da, #0097a7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .option-card h3 {
      font-size: 24px;
      font-weight: 600;
      color: #1565c0;
      margin-bottom: 12px;
    }

    .option-card p {
      color: #546e7a;
      font-size: 16px;
      line-height: 1.5;
    }

    .cover-footer {
      color: #1976d2;
      font-size: 14px;
      font-weight: 500;
    }

    /* Form Container */
    .form-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      padding: 48px 40px;
      border-radius: 24px;
      width: 100%;
      max-width: 520px;
      box-shadow: 0 20px 60px rgba(21, 101, 192, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      margin: 20px auto;
      display: none;
    }

    .form-container.show {
      display: block;
    }

    .form-header {
      margin-bottom: 32px;
      text-align: center;
    }

    .form-header h2 {
      color: #1565c0;
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .form-header p {
      color: #546e7a;
      font-size: 16px;
      font-weight: 400;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-group label {
      display: block;
      color: #1976d2;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 15px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 16px 20px;
      border: 2px solid #e3f2fd;
      border-radius: 12px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.8);
      outline: none;
      font-family: inherit;
      color: #37474f;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #42a5f5;
      box-shadow: 0 0 0 4px rgba(66, 165, 245, 0.15);
      background: rgba(255, 255, 255, 1);
      transform: translateY(-2px);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 120px;
    }

    /* Star Rating */
    .rating-container {
      margin-top: 8px;
    }

    .star-rating {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
      justify-content: center;
    }

    .star-rating input {
      display: none;
    }

    .star-rating label {
      font-size: 32px;
      color: #e1f5fe;
      cursor: pointer;
      transition: all 0.3s ease;
      display: block;
      width: auto;
      margin: 0;
      padding: 8px;
      user-select: none;
      border-radius: 50%;
    }

    .star-rating label:hover {
      transform: scale(1.2);
      text-shadow: 0 0 20px rgba(255, 193, 7, 0.8);
    }

    .rating-text {
      font-size: 14px;
      color: #546e7a;
      margin-top: 8px;
      opacity: 0;
      transition: opacity 0.3s ease;
      min-height: 20px;
      text-align: center;
      font-weight: 500;
    }

    .rating-text.show {
      opacity: 1;
    }

    /* Select dropdown styling */
    .form-group select {
      cursor: pointer;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2342a5f5' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 16px center;
      background-repeat: no-repeat;
      background-size: 16px;
      appearance: none;
    }

    /* Buttons */
    .submit-btn, .dashboard-btn, .back-btn {
      width: 100%;
      padding: 16px 24px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
    }

    .submit-btn {
      background: linear-gradient(135deg, #1976d2, #42a5f5);
      color: white;
      box-shadow: 0 8px 24px rgba(25, 118, 210, 0.3);
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(25, 118, 210, 0.4);
    }

    .dashboard-btn {
      background: linear-gradient(135deg, #26c6da, #00acc1);
      color: white;
      box-shadow: 0 8px 24px rgba(38, 198, 218, 0.3);
    }

    .dashboard-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(38, 198, 218, 0.4);
    }

    .back-btn {
      background: linear-gradient(135deg, #90a4ae, #607d8b);
      color: white;
      box-shadow: 0 8px 24px rgba(144, 164, 174, 0.3);
    }

    .back-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(144, 164, 174, 0.4);
    }

    .submit-btn:active, .dashboard-btn:active, .back-btn:active {
      transform: translateY(-1px);
    }

    /* Thank You Page */
    .thank-you {
      text-align: center;
      display: none;
      animation: fadeInUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .thank-you.show {
      display: block;
    }

    @keyframes fadeInUp {
      from { 
        opacity: 0; 
        transform: translateY(30px) scale(0.95); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
    }

    .thank-you h3 {
      color: #26c6da;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 16px;
      text-shadow: 0 2px 4px rgba(38, 198, 218, 0.3);
    }

    .thank-you p {
      color: #546e7a;
      font-size: 16px;
      margin-bottom: 32px;
      line-height: 1.6;
    }

    /* Dashboard Styles */
    .dashboard-container {
      display: none;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .dashboard-container.show {
      display: block;
    }

    .dashboard-header {
      text-align: center;
      margin-bottom: 40px;
      padding: 32px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      box-shadow: 0 12px 40px rgba(21, 101, 192, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .dashboard-header h2 {
      color: #1565c0;
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #1565c0, #42a5f5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .dashboard-header p {
      color: #546e7a;
      font-size: 16px;
      margin-bottom: 24px;
    }

    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      padding: 32px 24px;
      border-radius: 20px;
      box-shadow: 0 12px 40px rgba(21, 101, 192, 0.15);
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
    }

    .stat-card h3 {
      font-size: 36px;
      font-weight: 800;
      margin-bottom: 12px;
    }

    .stat-card p {
      color: #546e7a;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }

    .total { 
      background: linear-gradient(135deg, #42a5f5, #1976d2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .positive { 
      background: linear-gradient(135deg, #26c6da, #00acc1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .negative { 
      background: linear-gradient(135deg, #ef5350, #d32f2f);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .neutral { 
      background: linear-gradient(135deg, #ffa726, #f57c00);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .dashboard-charts {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    .chart-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      padding: 32px;
      border-radius: 20px;
      box-shadow: 0 12px 40px rgba(21, 101, 192, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .chart-container h3 {
      color: #1565c0;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 24px;
      text-align: center;
    }

    .feedback-table-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      padding: 32px;
      border-radius: 20px;
      box-shadow: 0 12px 40px rgba(21, 101, 192, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .feedback-table-container h3 {
      color: #1565c0;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 24px;
    }

    .feedback-table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 12px;
      overflow: hidden;
    }

    .feedback-table th,
    .feedback-table td {
      padding: 16px 12px;
      text-align: left;
      border-bottom: 1px solid #e3f2fd;
    }

    .feedback-table th {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      font-weight: 700;
      color: #1565c0;
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 1px;
    }

    .feedback-table td {
      color: #37474f;
      font-weight: 500;
    }

    .sentiment-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .sentiment-positive {
      background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
      color: #2e7d32;
    }

    .sentiment-negative {
      background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
      color: #c62828;
    }

    .sentiment-neutral {
      background: linear-gradient(135deg, #ffe0b2, #ffcc02);
      color: #ef6c00;
    }

    /* Action buttons */
    .action-buttons {
      margin-bottom: 24px;
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 12px 20px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .clear-btn {
      background: linear-gradient(135deg, #ef5350, #d32f2f);
      color: white;
      box-shadow: 0 4px 16px rgba(239, 83, 80, 0.3);
    }

    .clear-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(239, 83, 80, 0.4);
    }

    .export-btn {
      background: linear-gradient(135deg, #26c6da, #00acc1);
      color: white;
      box-shadow: 0 4px 16px rgba(38, 198, 218, 0.3);
    }

    .export-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(38, 198, 218, 0.4);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .cover-header h1 {
        font-size: 36px;
      }
      
      .cover-header p {
        font-size: 16px;
      }
      
      .dashboard-charts {
        grid-template-columns: 1fr;
      }
      
      .form-container {
        padding: 32px 24px;
        margin: 16px;
        border-radius: 20px;
      }

      .dashboard-container {
        padding: 16px;
      }

      .feedback-table {
        font-size: 14px;
      }

      .action-buttons {
        flex-direction: column;
        align-items: stretch;
      }

      .action-btn {
        width: 100%;
      }

      .dashboard-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Cover Page -->
  <div class="cover-container" id="coverContainer">
    <div class="cover-content">
      <div class="cover-header">
        <h1>Customer Feedback</h1>
        <p>Your voice matters. Help us improve our services by sharing your experience or review customer insights.</p>
      </div>

      <div class="options-container">
        <div class="option-card feedback-option" onclick="showFeedbackForm()">
          <span class="icon">üìù</span>
          <h3>Submit Feedback</h3>
          <p>Share your thoughts and help us improve our products and services</p>
        </div>

        <div class="option-card dashboard-option" onclick="showAdminDashboard()">
          <span class="icon">üìä</span>
          <h3>View Admin Dashboard</h3>
          <p>Access analytics and insights from customer feedback submissions</p>
        </div>
      </div>

      <div class="cover-footer">
        <p>Choose an option above to continue</p>
      </div>
    </div>
  </div>

  <!-- Form Container -->
  <div class="form-container" id="formContainer">
    <div class="form-header">
      <h2>Share Your Feedback</h2>
      <p>Help us improve by sharing your experience</p>
    </div>

    <form id="feedbackForm">
      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" placeholder="Enter your full name" required>
      </div>

      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" name="email" placeholder="Enter your email address" required>
      </div>

      <div class="form-group">
        <label for="product">Product/Service</label>
        <input type="text" id="product" name="product" placeholder="Which product or service?" required>
      </div>

      <div class="form-group">
        <label>Rate Your Experience</label>
        <div class="rating-container">
          <div class="star-rating">
            <input type="radio" id="star1" name="rating" value="1" required>
            <label for="star1" id="label1">‚òÖ</label>
            <input type="radio" id="star2" name="rating" value="2">
            <label for="star2" id="label2">‚òÖ</label>
            <input type="radio" id="star3" name="rating" value="3">
            <label for="star3" id="label3">‚òÖ</label>
            <input type="radio" id="star4" name="rating" value="4">
            <label for="star4" id="label4">‚òÖ</label>
            <input type="radio" id="star5" name="rating" value="5">
            <label for="star5" id="label5">‚òÖ</label>
          </div>
          <div class="rating-text" id="ratingText">Click to rate</div>
        </div>
      </div>

      <div class="form-group">
        <label for="type">Feedback Type</label>
        <select id="type" name="type" required>
          <option value="">Select feedback type</option>
          <option value="feedback">General Feedback</option>
          <option value="complaint">Complaint</option>
          <option value="suggestion">Suggestion</option>
          <option value="praise">Praise</option>
          <option value="bug">Bug Report</option>
        </select>
      </div>

      <div class="form-group">
        <label for="message">Your Feedback</label>
        <textarea id="message" name="message" placeholder="Share your thoughts..." required></textarea>
      </div>

      <button type="submit" class="submit-btn">Submit Feedback</button>
      <button type="button" class="back-btn" onclick="showCover()">Back to Home</button>
    </form>

    <div class="thank-you" id="thankYou">
      <h3>Thank You!</h3>
      <p>Your feedback has been submitted successfully. We appreciate your time and will use your input to improve our services.</p>
      <button type="button" class="back-btn" onclick="showCover()">Back to Home</button>
    </div>
  </div>

  <!-- Dashboard Container -->
  <div class="dashboard-container" id="dashboardContainer">
    <div class="dashboard-header">
      <h2>Feedback Dashboard</h2>
      <p>Analytics and insights from customer feedback</p>
      <button type="button" class="back-btn" onclick="showCover()">Back to Home</button>
    </div>

    <div class="dashboard-stats">
      <div class="stat-card">
        <h3 class="total" id="totalFeedback">0</h3>
        <p>Total Feedback</p>
      </div>
      <div class="stat-card">
        <h3 class="positive" id="positiveFeedback">0</h3>
        <p>Positive</p>
      </div>
      <div class="stat-card">
        <h3 class="negative" id="negativeFeedback">0</h3>
        <p>Negative</p>
      </div>
      <div class="stat-card">
        <h3 class="neutral" id="neutralFeedback">0</h3>
        <p>Neutral</p>
      </div>
    </div>

    <div class="dashboard-charts">
      <div class="chart-container">
        <h3>Sentiment Analysis</h3>
        <canvas id="sentimentChart"></canvas>
      </div>
      <div class="chart-container">
        <h3>Feedback by Type</h3>
        <canvas id="typeChart"></canvas>
      </div>
    </div>

    <div class="feedback-table-container">
      <h3>Recent Feedback Submissions</h3>
      <div class="action-buttons">
        <button type="button" class="action-btn clear-btn" onclick="clearAllFeedback()">
          Clear All Data
        </button>
        <button type="button" class="action-btn export-btn" onclick="exportFeedbackData()">
          Export Data
        </button>
        <span id="persistenceStatus" style="font-size: 12px; color: #546e7a; font-weight: 500;"></span>
      </div>
      <table class="feedback-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Type</th>
            <th>Rating</th>
            <th>Sentiment</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody id="feedbackTableBody">
        </tbody>
      </table>
    </div>
  </div>

<script>
  // Start with empty feedback data
  let feedbackData = [];

  // Use in-memory storage instead of localStorage for Claude.ai compatibility
  function loadFeedbackData() {
    // Initialize with sample data for demonstration
    feedbackData = [
      { name: "Demo User", email: "demo@example.com", type: "feedback", rating: 4, message: "This is a sample feedback entry", date: "2024-09-19", sentiment: "positive" }
    ];
  }

  // Save feedback data (in-memory only)
  function saveFeedbackData() {
    // Data persists only during the current session
    console.log('Feedback data saved to memory:', feedbackData.length, 'entries');
  }

  loadFeedbackData();

  // Navigation
  function showCover() {
    document.getElementById('coverContainer').style.display = 'flex';
    document.getElementById('formContainer').classList.remove('show');
    document.getElementById('dashboardContainer').classList.remove('show');

    const form = document.getElementById('feedbackForm');
    const thankYou = document.getElementById('thankYou');
    form.style.display = 'block';
    thankYou.classList.remove('show');
    form.reset();
    document.getElementById('ratingText').textContent = 'Click to rate';
    updateStars(0);
  }

  function showFeedbackForm() {
    document.getElementById('coverContainer').style.display = 'none';
    document.getElementById('formContainer').classList.add('show');
    document.getElementById('dashboardContainer').classList.remove('show');
  }

  function showAdminDashboard() {
    document.getElementById('coverContainer').style.display = 'none';
    document.getElementById('formContainer').classList.remove('show');
    document.getElementById('dashboardContainer').classList.add('show');
    updateDashboard();
  }

  // Star rating
  const stars = document.querySelectorAll('.star-rating input');
  const starLabels = document.querySelectorAll('.star-rating label');
  const ratingText = document.getElementById('ratingText');

  const ratingTexts = {
    '1': 'Poor',
    '2': 'Fair',
    '3': 'Good',
    '4': 'Very Good',
    '5': 'Excellent'
  };

  stars.forEach((star, index) => {
    star.addEventListener('change', (e) => {
      const rating = parseInt(e.target.value);
      updateStars(rating);
      ratingText.textContent = ratingTexts[rating];
      ratingText.classList.add('show');
    });
  });

  starLabels.forEach((label, index) => {
    label.addEventListener('mouseenter', () => {
      updateStars(index + 1);
    });
  });

  document.querySelector('.star-rating').addEventListener('mouseleave', () => {
    const checkedStar = document.querySelector('.star-rating input:checked');
    updateStars(checkedStar ? parseInt(checkedStar.value) : 0);
  });

  function updateStars(rating) {
    starLabels.forEach((label, index) => {
      label.style.color = index < rating ? '#ffc107' : '#e1f5fe';
    });
  }

  // Form submission
  document.getElementById('feedbackForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    const newFeedback = {
      name: formData.get('name'),
      email: formData.get('email'),
      type: formData.get('type'),
      rating: parseInt(formData.get('rating')),
      message: formData.get('message'),
      date: new Date().toISOString().split('T')[0],
      sentiment: getSentiment(parseInt(formData.get('rating')))
    };
    feedbackData.unshift(newFeedback);
    saveFeedbackData();
    this.style.display = 'none';
    document.getElementById('thankYou').classList.add('show');
  });

  function getSentiment(rating) {
    if (rating >= 4) return 'positive';
    if (rating <= 2) return 'negative';
    return 'neutral';
  }

  function updateDashboard() {
    const total = feedbackData.length;
    const positive = feedbackData.filter(f => f.sentiment === 'positive').length;
    const negative = feedbackData.filter(f => f.sentiment === 'negative').length;
    const neutral = feedbackData.filter(f => f.sentiment === 'neutral').length;

    document.getElementById('totalFeedback').textContent = total;
    document.getElementById('positiveFeedback').textContent = positive;
    document.getElementById('negativeFeedback').textContent = negative;
    document.getElementById('neutralFeedback').textContent = neutral;

    updateSentimentChart(positive, negative, neutral);
    updateTypeChart();
    updateFeedbackTable();
  }

  function updateSentimentChart(positive, negative, neutral) {
    const ctx = document.getElementById('sentimentChart').getContext('2d');
    Chart.getChart(ctx)?.destroy();
    new Chart(ctx, {
      type: 'doughnut',
      data: { 
        labels: ['Positive','Negative','Neutral'], 
        datasets: [{ 
          data: [positive, negative, neutral], 
          backgroundColor: ['#26c6da','#ef5350','#ffa726'], 
          borderWidth: 0,
          borderRadius: 8
        }] 
      },
      options: { 
        responsive: true, 
        plugins: { 
          legend: { 
            position: 'bottom',
            labels: {
              usePointStyle: true,
              padding: 20,
              font: {
                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto',
                size: 12,
                weight: '600'
              },
              color: '#37474f'
            }
          }
        } 
      }
    });
  }

  function updateTypeChart() {
    const typeCounts = {};
    feedbackData.forEach(f => typeCounts[f.type] = (typeCounts[f.type] || 0) + 1);
    const ctx = document.getElementById('typeChart').getContext('2d');
    Chart.getChart(ctx)?.destroy();
    new Chart(ctx, {
      type: 'bar',
      data: { 
        labels: Object.keys(typeCounts), 
        datasets: [{ 
          label: 'Count', 
          data: Object.values(typeCounts), 
          backgroundColor: '#42a5f5', 
          borderRadius: 8,
          borderSkipped: false
        }] 
      },
      options: { 
        responsive: true, 
        plugins: { 
          legend: { 
            display: false 
          } 
        }, 
        scales: { 
          y: { 
            beginAtZero: true, 
            ticks: { 
              stepSize: 1,
              color: '#546e7a',
              font: {
                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto',
                size: 11,
                weight: '500'
              }
            },
            grid: {
              color: '#e3f2fd'
            }
          },
          x: {
            ticks: {
              color: '#546e7a',
              font: {
                family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto',
                size: 11,
                weight: '500'
              }
            },
            grid: {
              display: false
            }
          }
        } 
      }
    });
  }

  function updateFeedbackTable() {
    const tbody = document.getElementById('feedbackTableBody');
    tbody.innerHTML = '';
    if(feedbackData.length === 0){
      const row = document.createElement('tr');
      row.innerHTML = `<td colspan="6" style="text-align:center;color:#90a4ae;padding:40px;font-style:italic;">No feedback submitted yet.</td>`;
      tbody.appendChild(row);
      return;
    }
    feedbackData.slice(0,10).forEach(f => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${f.name}</td>
        <td>${f.email}</td>
        <td style="text-transform: capitalize;">${f.type}</td>
        <td style="color: #ffc107; font-size: 16px;">${'‚òÖ'.repeat(f.rating)}${'‚òÜ'.repeat(5-f.rating)}</td>
        <td><span class="sentiment-badge sentiment-${f.sentiment}">${f.sentiment}</span></td>
        <td>${f.date}</td>
      `;
      tbody.appendChild(row);
    });
  }

  updateDashboard();

  function clearAllFeedback() {
    if(confirm('Are you sure you want to clear all feedback data? This action cannot be undone.')) {
      feedbackData = [];
      saveFeedbackData();
      updateDashboard();
    }
  }

  function exportFeedbackData() {
    if (feedbackData.length === 0) {
      alert('No feedback data to export.');
      return;
    }
    
    const dataStr = JSON.stringify(feedbackData, null, 2);
    const blob = new Blob([dataStr], {type: "application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `feedback_data_${new Date().toISOString().split('T')[0]}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  // Update persistence status
  document.getElementById('persistenceStatus').textContent = 'Data stored in memory for current session only';
</script>

</body>
</html>